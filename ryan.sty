%Colour
\usepackage[dvipsnames]{xcolor}
\usepackage{soul,xcolor}
\definecolor{darkred}{rgb}{0.5, 0.0, 0.13}
\definecolor{darkblue}{rgb}{0.0, 0.0, 0.5}

%AMS packages
\usepackage{amsmath,amssymb,amsthm,amsfonts}
%\usepackage[integrals]{wasysym}
\usepackage{esint} %Extended set of integrals

%Define some macros
\newcommand{\cbrt}[1]{\sqrt[3]{#1}}
\newcommand{\floor}[1]{\left\lfloor #1 \right\rfloor}
\newcommand{\ceiling}[1]{\left\lceil #1 \right\rceil}
\newcommand{\mailto}[1]{\href{mailto:#1}{\texttt{#1}}}
\newcommand{\brac}[1]{\left(#1\right)}
\newcommand{\sqbrac}[1]{\left[#1\right]}
\newcommand{\absolute}[1]{\left|#1\right|}
\newcommand{\crbrac}[1]{\left\{#1\right\}}
\newcommand{\angbrac}[1]{\left\langle#1\right\rangle}
\newcommand{\vocab}[1]{{\color{darkred}\bfseries\textit{#1}}}
\renewcommand{\epsilon}{\varepsilon}
%\newcommand{\unit}[1]{\,\mathrm{#1}}
\newcommand{\degC}{^\circ{\mathrm C}}
\newcommand{\tab}{\hspace{0.5cm}}
\newcommand{\per}[2]{^{#1}\mathrm{P}_{#2}}
\newcommand{\com}[2]{^{#1}\mathrm{C}_{#2}}
\newcommand{\leg}[2]{\brac{\dfrac{#1}{#2}}}
\newcommand{\proj}[2]{\mathrm{proj}_{#1}\brac{{#2}}}
\newcommand{\cat}[1]{\mathsf{#1}}

%More commands and math operators
\DeclareMathOperator{\cis}{cis}
\DeclareMathOperator*{\lcm}{lcm}
\DeclareMathOperator{\diam}{diam}
\DeclareMathOperator{\cosec}{cosec}
\DeclareMathOperator{\Exp}{\mathbb{E}}
\DeclareMathOperator{\Var}{Var}
\DeclareMathOperator{\Po}{Po}
\DeclareMathOperator{\dom}{dom}
\DeclareMathOperator{\ran}{ran}
\DeclareMathOperator{\cs}{cis}
\newcommand{\suchthat}{\text{ s.t. }}
\DeclareMathOperator{\spn}{span}
\DeclareMathOperator{\im}{im}
\DeclareMathOperator{\id}{id}
\DeclareMathOperator{\ch}{ch}
\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\End}{End}
\DeclareMathOperator{\Aut}{Aut}
\DeclareMathOperator{\Ann}{Ann}
\DeclareMathOperator{\Row}{Row}
\DeclareMathOperator{\Col}{Col}
\DeclareMathOperator{\Int}{Int}
\DeclareMathOperator{\orb}{orb}
\DeclareMathOperator{\stab}{stab}
\DeclareMathOperator{\ccl}{ccl}
%\DeclareMathOperator{\Sym}{Sym}
\DeclareMathOperator{\ob}{\mathsf{ob}}
\DeclareMathOperator{\Hom}{\mathsf{Hom}}

%Letters
\newcommand{\BB}{\mathbf B}
\newcommand{\CC}{\mathbb C}
\newcommand{\DD}{\mathbb D}
\newcommand{\EE}{\mathbf E}
\newcommand{\FF}{\mathbf F}
\newcommand{\KK}{\mathbf K}
\newcommand{\HH}{\mathbb H}
\newcommand{\NN}{\mathbb N}
\newcommand{\PP}{\mathbb P}
\newcommand{\QQ}{\mathbb Q}
\newcommand{\RR}{\mathbb R}
\newcommand{\SSS}{\mathbf S}
\newcommand{\TT}{\mathbb T}
\newcommand{\ZZ}{\mathbb Z}
\usepackage{mathrsfs}

%Asymptote setup
\usepackage{asymptote}

% Advanced positioning
\usepackage{xcoffins,calc}

%Ragged boxes
\usepackage[raggedrightboxes]{ragged2e}

\usepackage{cancel} %Strikeout text

% Pictures and images
\usepackage{graphicx,float}
\graphicspath{ {./images/} }
\usepackage{tikz,pstricks}
\usetikzlibrary{calc}
\usetikzlibrary{intersections}
\usetikzlibrary{through}
%\usetikzlibrary{backgrounds}
\usetikzlibrary{positioning}
\usetikzlibrary{shapes.geometric, arrows}
\usepackage{tikz-cd}
%\usepackage[siunitx]{circuitikz}

% Code environment
\usepackage{listings}
\lstset{
basicstyle=\small\ttfamily,
columns=flexible,
breaklines=true
}
\lstdefinestyle{mystyle}{
    backgroundcolor=\color{backcolour},
    basicstyle=\ttfamily\footnotesize,
    breakatwhitespace=false,         
    breaklines=true,                 
    captionpos=b,                    
    keepspaces=true,
    showspaces=false,                
    showstringspaces=false,
    showtabs=false,                  
    tabsize=2
}

\lstset{style=mystyle}

% Customise lists (such as itemize, enumerate, description)
\usepackage{enumerate}
\usepackage{enumitem}

% Create colored boxes for theorems, examples, etc.
\usepackage[most,listings,many]{tcolorbox}

\usepackage{hyperref} % Hyperlink setup
\hypersetup{
    colorlinks,
%    citecolor=darkred,
    filecolor=black,
    linkcolor=blue,
    urlcolor=darkred,
}

% Cross referencing
\usepackage{varioref}
\usepackage[capitalise]{cleveref}
\usepackage{nameref}

\usepackage{setspace}
\usepackage{array,tabularray,multirow,multicol,longtable,booktabs} % Tables

\usepackage{physics} % Physics symbols and notation
\usepackage{derivative} % Derivative notation
\usepackage{ifthen} % Conditional statements

% Plotting graphs
\usepackage{pgfplots}

% Formatting code
\usepackage{fancyvrb} %\Verbatim[numbers=left,frame=single,formatcom=\color{red}] - this is used to print code

% Page numbering
%\usepackage{lastpage}

% Tools for writing packages
\usepackage{etoolbox}

\usepackage[bottom]{footmisc} % Bottom footnotes

\usepackage[acronym]{glossaries} % Acronyms

\usepackage[colorinlistoftodos]{todonotes} % Create todo notes
\usepackage{comment} %Comment out text
\usepackage{version}
\usepackage{imakeidx} % Index

%Theorem setup
\usepackage{thmtools}
\usepackage[framemethod=TikZ]{mdframed}
\usetikzlibrary{shadows}

\newenvironment{solution}{\begin{proof}[Solution]}{\end{proof}}

\theoremstyle{definition}
\newtheorem{definition}{\bfseries\color{darkred} Definition}[chapter]
\newtheorem*{definition*}{Definition}
\newtheorem*{claim}{Claim}
\newtheorem{exercise}{Exercise}[chapter]
\newtheorem{example}[definition]{Example}

\theoremstyle{plain}
\newtheorem{theorem}[definition]{\bfseries\color{darkblue} Theorem}
\newtheorem*{theorem*}{Theorem}
\newtheorem{lemma}[definition]{\bfseries\color{darkblue} Lemma}
\newtheorem*{lemma*}{Lemma}
\newtheorem{proposition}[definition]{\bfseries\color{darkblue} Proposition}
\newtheorem*{proposition*}{Proposition}
\newtheorem{corollary}[definition]{\bfseries\color{darkblue} Corollary}
\newtheorem*{corollary*}{Corollary}

\theoremstyle{remark}
\newtheorem*{remark}{Remark}
\newtheorem*{notation}{Notation}
\newtheorem*{idea}{Idea}
\AtBeginEnvironment{idea}{\begingroup\color{gray}}
\AtEndEnvironment{idea}{\endgroup}

\tcolorboxenvironment{definition}{
  enhanced,
  colback=darkred!5!white,
  fonttitle=\bfseries,
  sharp corners,
  boxrule=0pt, frame hidden,
  borderline west={2pt}{0pt}{darkred},
  breakable,
}
%\tcolorboxenvironment{example}{
%  enhanced jigsaw,colframe=gray,interior hidden,
%breakable,before skip=10pt,after skip=10pt
%}
\tcolorboxenvironment{theorem}{
  enhanced,
  colback=darkblue!5!white,
  fonttitle=\bfseries,
  sharp corners,
  boxrule=0pt, frame hidden,
  borderline west={2pt}{0pt}{darkblue},
  breakable,
}
\tcolorboxenvironment{lemma}{
  enhanced,
  colback=darkblue!5!white,
  fonttitle=\bfseries,
  sharp corners,
  boxrule=0pt, frame hidden,
  borderline west={2pt}{0pt}{darkblue},
  breakable,
}
\tcolorboxenvironment{proposition}{
  enhanced,
  colback=darkblue!5!white,
  fonttitle=\bfseries,
  sharp corners,
  boxrule=0pt, frame hidden,
  borderline west={2pt}{0pt}{darkblue},
  breakable,
}
\tcolorboxenvironment{corollary}{
  enhanced,
  colback=darkblue!5!white,
  fonttitle=\bfseries,
  sharp corners,
  boxrule=0pt, frame hidden,
  borderline west={2pt}{0pt}{darkblue},
  breakable,
}

% Customise section headings
\usepackage{titlesec}
\titleclass{\part}{top}
\titleformat{\part}[display]
  {\Huge\bfseries\centering}{{\thepart}}{0pt}{}
\titlespacing*{\part}{0pt}{20pt}{50pt}
%\titleformat{\chapter}[hang]{\fontsize{60}{70}\bfseries}{{\thechapter}}{15pt}{\Huge\bfseries}
%\titlespacing*{\chapter}{0pt}{0pt}{0pt}
%\titleformat{\section}{\LARGE\bfseries\itshape}{{\S\thesection}}{0.6em}{}
%\titleformat{\subsection}{\Large\itshape}{{\S\thesubsection}}{1em}{}
%\setcounter{secnumdepth}{1}
\setcounter{tocdepth}{1}

% Font
%\usepackage{lmodern}
%\usepackage[T1]{fontenc}
%\usepackage{tgpagella}
\usepackage{times}