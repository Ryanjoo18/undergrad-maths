\chapter{Abstract Integration}\label{chap:abstract-integration}
\section{The Concept of Measurability}
\begin{definition}[$\sigma$-algebra]\label{defn:sigma-algebra}
A collection $\mathcal{M}$ of subsets of a set $X$ is a \vocab{$\sigma$-algebra} in $X$ if
\begin{enumerate}[label=(\roman*)]
\item $X\in\mathcal{M}$;
\item if $A\in\mathcal{M}$, then $A^c\in\mathcal{M}$;\hfill(closed under complements)
\item if $A_1,A_2,\dots\in\mathcal{M}$, then $\bigcup_{n=1}^{\infty}A_n\in\mathcal{M}$.\hfill(closed under countable unions)
\end{enumerate}
If $\mathcal{M}$ is a $\sigma$-algebra in $X$, then $(X,\mathcal{M})$ is a \vocab{measurable space}, and the members of $\mathcal{M}$ are called the \emph{measurable sets} in $X$.
\end{definition}

If (iii) is required for finite unions only, we call $\mathcal{M}$ an \emph{algebra}.

\begin{remark}
If the $\sigma$-algebra $\mathcal{M}$ is clear, we simply omit it and denote a measurable space as $X$.
\end{remark}

From \cref{defn:sigma-algebra}, the following properties immediately follow.
\begin{itemize}
\item Since $\emptyset=X^c$, (i) and (ii) imply that $\emptyset\in\mathcal{M}$.
\item Taking $A_{n+1}=A_{n+2}=\cdots=\emptyset$ in (iii), we see that $A_1\cup\cdots\cup A_n\in\mathcal{M}$ if $A_1,\dots,A_n\in\mathcal{M}$, so $\mathcal{M}$ is closed under finite unions.
\item Since
\[\bigcap_{n=1}^{\infty}A_n=\brac{\bigcup_{n=1}^{\infty}{A_n}^c}^c,\]
$\mathcal{M}$ is closed under countable (and also finite) intersections.
\item If $A,B\in\mathcal{M}$, since $A\setminus B=B^c\cap A$, then $A\setminus B\in\mathcal{M}$.
\end{itemize}

\begin{definition}[Measurable function]
Let $X$ be a measurable space, $Y$ be a topological space. We say $f\colon X\to Y$ is \vocab{measurable}\index{measurable function} if $f^{-1}(U)$ is a measurable set in $X$ for every open set $U$ in $Y$.
\end{definition}

That is, $f$ is measurable if the pre-image of every open set is measurable.

The next result states that continuous functions of continuous functions are continuous; continuous functions of measurable functions are measurable.

\begin{lemma}\label{lemma:composition-continuity}
Let $Y$ and $Z$ be topological spaces, and let $g\colon Y\to Z$ be continuous.
\begin{enumerate}[label=(\roman*)]
\item If $X$ is a topological space, if $f\colon X\to Y$ is continuous, and if $h=g\circ f$, then $h\colon X\to Z$ is continuous.
\item If $X$ is a measurable space, if $f\colon X\to Y$ is measurable, and if $h=g\circ f$, then $h\colon X\to Z$ is measurable.
\end{enumerate}
\end{lemma}

\begin{proof}
Let $U$ be open in $Z$. By continuity of $g$, we have that $g^{-1}(U)$ is open in $Y$. Note that
\[h^{-1}(U)=f^{-1}\brac{g^{-1}(U)}.\]
\begin{enumerate}[label=(\roman*)]
\item If $f$ is continuous, it follows that $h^{-1}(U)$ is open, so $h$ is continuous.
\item If $f$ is measurable, it follows that $h^{-1}(U)$ is measurable, so $h$ is continuous.
\end{enumerate}
\end{proof}

The next result states that the tuple of measurable functions is measurable.

\begin{lemma}\label{lemma:tuple-measurable-function}
Let $u$ and $v$ be real measurable functions on a measurable space $X$, let $\Phi$ be a continuous mapping of the plane into a topological space $Y$. Define
\[h(x)=\Phi\brac{u(x),v(x)}\quad(x\in X).\]
Then $h\colon X\to Y$ is measurable.
\end{lemma}

\begin{proof}
Let $f(x)=\brac{u(x),v(x)}$. Then $f$ maps $X$ into the plane $\RR^2$. Since $h=\Phi\circ f$, by \ref{lemma:composition-continuity}, it suffices to show that $f$ is measurable.

\begin{idea}
We want to show that any open set in $\RR^2$ has a measurable pre-image. 
Hint: every open set in $\RR^2$ is a countable union of sets of the form $I_1\times I_2$, where $I_1$ and $I_2$ are open intervals in $\RR$.
\end{idea}

If $R\subset\RR^2$ is any open rectangle with sides parallel to the axes, then $R=I_1\times I_2$ for two open intervals $I_1,I_2\subset\RR$. Then
\begin{align*}
f^{-1}(R)
&=f^{-1}(I_1\times I_2)\\
&=(u,v)^{-1}(I_1\times I_2)\\
&=u^{-1}(I_1)\cap v^{-1}(I_2)
\end{align*}
The intersection of two measurable sets is measurable, so $f^{-1}(R)$ is measurable.
Every open set $U$ in $\RR^2$ is a countable union of such rectangles $R_i$, and since
\[f^{-1}(U)=f^{-1}\brac{\bigcup_{i=1}^{\infty}R_i}=\bigcup_{i=1}^{\infty}f^{-1}(R_i),\]
we have that $f^{-1}(U)$ is a countable union of measurable sets, so $f^{-1}(U)$ is measurable.
\end{proof}

We now prove some consequences of the above results, concerning the measurability of functions that we shall frequently encounter.

\begin{proposition}
Let $X$ be a measurable space.
\begin{enumerate}[label=(\roman*)]
\item If $f=u+iv$, where $u$ and $v$ are real measurable functions on $X$, then $f$ is a complex measurable function on $X$.

\item If $f=u+iv$ is a complex measurable function on $X$, then $u$, $v$, and $|f|$ are real measurable functions on $X$.

\item If $f$ and $g$ are complex measurable functions on $X$, then so are $f+g$ and $fg$.

\item If $E$ is a measurable set in $X$ and the \emph{characteristic function} of $E$ is defined as
\[\chi_E(x)=\begin{cases}
1&(x\in E)\\
0&(x\notin E)
\end{cases}\]
then $\chi_E$ is a measurable function.

\item If $f$ is a complex measurable function on $X$, there is a complex measurable function $\alpha$ on $X$ such that $|\alpha|=1$ and $f=\alpha|f|$. 
\end{enumerate}
\end{proposition}

\begin{proof} \
\begin{enumerate}[label=(\roman*)]
\item This follows from \ref{lemma:tuple-measurable-function}, by taking $\Phi(z)=z$.

\item This follows from \ref{lemma:composition-continuity}, by taking $g(z)=\Re(z)$, $g(z)=\Im(z)$, and $g(z)=|z|$ respectively.

\item For real $f$ and $g$, this follows from \ref{lemma:tuple-measurable-function}, by taking $\Phi(s,t)=s+t$ and $\Phi(s,t)=st$ respectively. 

The complex case then follows from (i) and (ii).

\item Let $U$ be open in $\RR$. Then
\[\chi_E^{-1}(U)=\begin{cases}
X&(0,1\in U)\\
E&(1\in U,\:0\notin U)\\
E^c&(1\notin U,\:0\in U)\\
\emptyset&(\text{otherwise})
\end{cases}\]
all those sets are measurable, since $E$ is measurable.

\item Let $E=\{x\mid f(x)=0\}$. Let $Y=\CC\setminus\{0\}$, and define $\phi(z)=\dfrac{z}{|z|}$ for $z\in Y$. Let
\[\alpha(x)=\phi\brac{f(x)+\chi_E(x)}\quad(x\in X).\]
If $x\in E$, $\alpha(x)=1$; if $x\notin E$, $\alpha(x)=\dfrac{f(x)}{|f(x)|}$. This shows that $|\alpha|=1$.

Since $\phi$ is continuous on $Y$, and $E$ is measurable (since $|f|$ is real measurable and $E^c=|f|^{-1}\brac{(0,\infty)}$), the measurability of $\alpha$ follows from (iii), (iv), and \ref{lemma:composition-continuity}. 
\end{enumerate}
\end{proof}

We now show that $\sigma$-algebras exist in great profusion.

\begin{lemma}
If $\mathcal{F}$ is any collection of subsets of $X$, there exists a smallest $\sigma$-algebra $\mathcal{M}^*$ in $X$ such that $\mathcal{F}\subset\mathcal{M}^*$.
\end{lemma}

\begin{proof}
Let $\Omega$ be the family of all $\sigma$-algebras $\mathcal{M}$ in $X$ which contain $\mathcal{F}$.

Since the collection of all subsets of $X$ is such a $\sigma$-algebra, $\Omega$ is not empty.
\begin{claim}
$\mathcal{M}^*$ is the intersection of all $\mathcal{M}\in\Omega$.
\end{claim}
It is clear that $\mathcal{F}\subset\mathcal{M}^*$ and that $\mathcal{M}^*$ lies in every $\sigma$-algebra in $X$ which contains $\mathcal{F}$. To complete the proof, we have to show that $\mathcal{M}^*$ is itself a $\sigma$-algebra.
\begin{enumerate}[label=(\roman*)]
\item 
\item If $A_1,A_2,\dots\in\mathcal{M}^*$ and if $\mathcal{M}\in\Omega$, then $A_1,A_2,\dots\in\mathcal{M}$, so $\bigcup_{n=1}^{\infty}A_n\in\mathcal{M}$, since $\mathcal{M}$ is a $\sigma$-algebra.

Since $\bigcup_{n=1}^{\infty}A_n\in\mathcal{M}$ for every $\mathcal{M}\in\Omega$, we conclude that $\bigcup_{n=1}^{\infty}An\in\mathcal{M}^*$.

\item 
\end{enumerate}
\end{proof}

We call this $\mathcal{M}^*$ the $\sigma$-algebra \emph{generated} by $\mathcal{F}$.

The following is one of the most important $\sigma$-algebras.

\begin{definition}[Borel sets]
Let $X$ be a topological space. By Theorem 1.10, there exists a smallest $\sigma$-algebra fJI in $X$ such that every open set in $X$ belongs to $\mathcal{B}$.

The members of $\mathcal{B}$ are called the \vocab{Borel sets} of $X$. 
\end{definition}

Since $\mathcal{B}$ is a $\sigma$-algebra, we may now regard $X$ as a measurable space, with the Borel sets playing the role of the measurable sets; more concisely, we consider the measurable space $(X,\mathcal{B})$. If $f\colon X\to Y$ is continuous, where $Y$ is any topological space, then it is evident from the definitions that $f^{-1}(U)\in\mathcal{B}$ for every open set $U$ in $Y$. In other words, every continuous mapping of $X$ is Borel measurable.

Borel measurable mappings are often called \emph{Borel mappings}, or \emph{Borel functions.} 

\begin{proposition}
Suppose $\mathcal{M}$ is a $\sigma$-algebra in $X$, and $Y$ is a topological space. Let $f\colon X\to Y$.
\begin{enumerate}[label=(\roman*)]
\item If $\Omega$ is the collection of all sets $E\subset Y$ such that $f^{-1}(E)\in\mathcal{M}$, then $\Omega$ is a $\sigma$-algebra in $Y$.
\item If $f$ is measurable and $E$ is a Borel set in $Y$, then $f^{-1}(E)\subset\mathcal{M}$.
\item If $Y=[-\infty,\infty]$ and $f^{-1}\brac{(\alpha,\infty]}\in\mathcal{M}$ for every real $\alpha$, then $f$ is measurable.
\item If $f$ is measurable, if $Z$ is a topological space, if $g\colon Y\to Z$ is a Borel mapping, and if $h=g\circ f$, then $h\colon X\to Z$ is measurable.
\end{enumerate}
\end{proposition}

Suppose $(f_n)$ is a sequence of extended-real functions on a set $X$. 
Then define
\begin{align*}
\brac{\sup_{n}f_n}(x)&\colonequals\sup_{n}\brac{f_n(x)},\\
\brac{\limsup_{n\to\infty}f_n}(x)&\colonequals\limsup_{n\to\infty}\brac{f_n(x)}.
\end{align*}

If
\[f(x)=\lim_{n\to\infty}f_n(x)\quad(x\in X),\]
then we call $f$ the \emph{pointwise limit} of $(f_n)$.

\begin{proposition}
If $f_n:X\to[-\infty,\infty]$ is measurable, and
\[g=\sup_{n\ge1}f_n,\quad h=\limsup_{n\to\infty}f_n,\]
then $g$ and $h$ are measurable.
\end{proposition}

\begin{proof}
Note that
\[g^{-1}\brac{(\alpha,\infty]}=\bigcup_{n=1}^{\infty}f_n^{-1}\brac{(\alpha,\infty]}.\]
Hence by Theorem 1.12(c), $g$ is measurable. 

The same result holds with inf in place of sup, and since
\[h=\inf_{k\ge1}\brac{\sup_{n\ge k}f_n},\]
it follows that $h$ is measurable.
\end{proof}

\begin{corollary} \
\begin{enumerate}[label=(\roman*)]
\item The limit of every pointwise convergent sequence of complex measurable functions is measurable.
\item If $f$ and $g$ are measurable (with range in $[-\infty,\infty]$), then so are $\max\{f,g\}$ and $\min\{f,g\}$. In particular, this is true of the functions
\[f^+=\max\{f,0\}\quad\text{and}\quad f^-=-\min\{f,0\}.\] 
\end{enumerate}
\end{corollary}

\begin{proof}
Let $(f_n)$ be pointwise convergent, and
\[f(x)=\lim_{n\to\infty}f_n(x)\quad(x\in X).\]

\end{proof}

We call $f^+$ and $f^-$ the \emph{positive and negative parts} of $f$. 

We have $|f|=f^++f^-$ and $f=f^+-f^-$, a standard representation of $f$ as a difference of two non-negative functions, with a certain minimality property: 

\begin{lemma}
If $f=g-h$, $g\ge0$ and $h\ge0$, then $f^+\le g$ and $f^-\le h$.
\end{lemma}

\begin{proof}
$f\le g$ and $0\le g$ clearly implies $\max\{f,0\}\le g$. 
\end{proof}
\pagebreak

\section{Elementary Properties of Measures}
Let $\mathcal{M}$ be a $\sigma$-algebra.

\begin{definition}[Measure space]
A \vocab{measure} is a function $\mu:\mathcal{M}\to[0,\infty]$ which is \emph{countably additive}: if $\{A_i\mid i\in I\}$ is a disjoint countable collection of members of $\mathcal{M}$, then
\[\mu\brac{\bigcup_{i=1}^{\infty}A_i}=\sum_{i=1}^{\infty}\mu(A_i).\]
A \vocab{measure space} is a measurable space which has a measure defined on the $\sigma$-algebra of its measurable sets.

A \emph{complex measure} is a complex-valued countably additive function defined on a $\sigma$-algebra. 
\end{definition}

\begin{lemma}[Properties of measure]
Let $\mu:\mathcal{M}\to[0,\infty]$ be a measure.
\begin{enumerate}[label=(\roman*)]
\item $\mu(\emptyset)=0$
\item If $A_1,\dots,A_n\in\mathcal{M}$ are pairwise disjoint, then\hfill(finite additivity)
\[\mu(A_1\cup\cdots\cup A_n)=\mu(A_1)+\cdots+\mu(A_n).\]
\item If $A,B\in\mathcal{M}$ are such that $A\subset B$, then $\mu(A)\le\mu(B)$.\hfill(monotonicity)
\item If $A_1,A_2,\dots\in\mathcal{M}$ and $A_1\subset A_2\subset\cdots$, then
\[\lim_{n\to\infty}\mu(A_n)=\mu\brac{\bigcup_{n=1}^{\infty}A_n}.\]
\item If $A_1,A_2,\dots\in\mathcal{M}$, $\mu(A_1)$ is finite and $A_1\supset A_2\supset\cdots$, then
\[\lim_{n\to\infty}\mu(A_n)=\mu\brac{\bigcap_{n=1}^{\infty}A_n}.\]
\end{enumerate}
\end{lemma}

\begin{example} \
\begin{itemize}
\item For any $E\subset X$, where $X$ is any set, define $\mu(E)=\infty$ if $E$ is an infinite set, and let $\mu(E)$ be the number of points in $E$ if $E$ is finite. This $\mu$ is called the \emph{counting measure} on $X$. 
\item Fix $x_0\in X$. For any $E\subset X$, let
\[\mu(E)=\begin{cases}
1&(x_0\in E)\\
0&(x_0\notin E)
\end{cases}\]
This $\mu$ is called the \emph{unit mass} concentrated at $x_0$.
\end{itemize}
\end{example}
\pagebreak

\section{Integration}
\subsection{Simple Functions}
\begin{definition}
Let $X$ be a measurable space. We say $s:X\to\CC$ is a \vocab{simple function} if its range consists of only finitely many points. 
\end{definition}

Among these are the \emph{non-negative simple functions}, whose range is a finite subset of $[0,\infty)$. Note that we explicitly exclude $\infty$ from the values of a simple function.

If $\alpha_1,\dots,\alpha_n$ are the distinct values of a simple function $s$, and if we set $A_i=\{x\mid s(x)=\alpha_i\}$, then clearly
\[s=\sum_{i=1}^{n}\alpha_i\chi_{A_i}\]
where $\chi_{A_i}$ is the characteristic function of $A_i$.

It is also clear that $s$ is measurable if and only if each of the sets $A_i$ is measurable.

\begin{proposition}
Let $f\colon X\to[0,\infty]$ be measurable. There exist simple measurable functions $s_n$ on $X$ such that
\begin{enumerate}[label=(\roman*)]
\item $0\le s_1\le s_2\le\cdots\le f$;
\item $\displaystyle\lim_{n\to\infty}s_n(x)=f(x)$, for every $x\in X$.
\end{enumerate}
\end{proposition}
\pagebreak

\subsection{Integration of Positive Functions}
Let $\mathcal{M}$ be a $\sigma$-algebra in a set $X$, and let $\mu:\mathcal{M}\to[0,\infty]$ be a measure.

\begin{definition}[Lebesgue integral]
If $s:X\to[0,\infty)$ is a measurable simple function, of the form
\[s=\sum_{i=1}^{n}\alpha_i\chi_{A_i},\]
where $\alpha_1,\dots,\alpha_n$ are the distinct values of $s$, and if $E\in\mathcal{M}$, we define
\[\int_{E}s\dd{\mu}\colonequals\sum_{i=1}^{n}\alpha_i\mu(A_i\cap E).\]
If $f\colon X\to[0,\infty]$ is measurable, and $E\in\mathcal{M}$, we define the \vocab{Lebesgue integral} of $f$ over $E$ as
\begin{equation}
\int_{E}f\dd{\mu}\colonequals\sup\int_{E}s\dd{\mu}.
\end{equation}
\end{definition}

\begin{lemma}[Properties of Lebesgue integral]

\end{lemma}

We now come to the interesting part of the theory. One of its most remarkable features is the ease with which it handles limit operations.

\begin{theorem}[Lebesgue's monotone convergence theorem]
Let $(f_n)$ be a sequence of measurable functions on $X$, and suppose that
\begin{enumerate}[label=(\roman*)]
\item $0\le f_1(x)\le f_2(x)\le\cdots\le\infty$ for every $x\in X$,
\item $f_n(x)\to f(x)$ pointwise for every $x\in X$.
\end{enumerate}
Then $f$ is measurable, and
\begin{equation}
\lim_{n\to\infty}\int_{X}f_n\dd{\mu}=\int_{X}f\dd{\mu}.
\end{equation}
\end{theorem}

\begin{proposition}
If $f_n:X\to[0,\infty]$ are measurable, and
\[f(x)=\sum_{n=1}^{\infty}f_n(x)\quad(x\in X),\]
then
\begin{equation}
\int_{X}f\dd{\mu}=\sum_{n=1}^{\infty}\int_{X}f_n\dd{\mu}.
\end{equation}
\end{proposition}

If we let $\mu$ be the counting measure on a countable set, Theorem 1.27 is a statement about double series of nonnegative real numbers (which can of course be proved by more elementary means): 

\begin{corollary}
If $a_{ij}\ge0$ for $i,j=1,2,\dots$, then
\[\sum_{i=1}^{\infty}\sum_{j=1}^{\infty}a_{ij}=\sum_{j=1}^{\infty}\sum_{i=1}^{\infty}a_{ij}.\]
\end{corollary}

\begin{theorem}[Fatau's lemma]
Let $f_n:X\to[0,\infty]$ be a sequence of measurable functions. Then
\begin{equation}
\int_{X}\brac{\liminf_{n\to\infty}f_n}\dd{\mu}\le\liminf_{n\to\infty}\int_{X}f_n\dd{\mu}.
\end{equation}
\end{theorem}

\begin{proposition}[Change of variables]
Suppose $f\colon X\to[0,\infty]$ is measurable, and
\[\phi(E)=\int_{E}f\dd{\mu}\quad(E\in\mathcal{M}.)\]
Then $\phi$ is a measure on $\mathcal{M}$, and
\begin{equation}
\int_{X}g\dd{\phi}=\int_{X}gf\dd{\mu}
\end{equation}
for every measurable $g\colon X\to[0,\infty]$.
\end{proposition}
\pagebreak

\subsection{Integration of Complex Functions}
As before, let $\mu$ be a measure on an arbitrary measurable space $X$.

\begin{definition}[Class of Lebesgue integrable functions]
We define $L^1(\mu)$ to be the collection of complex measurable functions on $X$, for which
\[\int_{X}|f|\dd{\mu}<\infty.\]
[Note that the measurability of $f$ implies that of $|f|$, as we saw in Proposition 1.9(b); hence the above integral is defined.]

The members of $L^1(\mu)$ are called \vocab{Lebesgue integrable functions} (with
respect to $\mu$) or \emph{summable functions}.
\end{definition}

If $f=u+iv$, where $u$ and $v$ are real measurable functions on $X$, and if $f\in L^1(\mu)$, define
\[\int_{E}f\dd{\mu}\colonequals\brac{\int_{E}u^+\dd{\mu}-\int_{E}u^-\dd{\mu}}+i\brac{\int_{E}v^+\dd{\mu}-\int_{E}v^-\dd{\mu}}\]
for every measurable set $E$.

Occasionally it is desirable to define the integral of a measurable function $f$ with range in $[-\infty,\infty]$ to be
\[\int_{E}f\dd{\mu}\colonequals\int_{E}f^+\dd{\mu}-\int_{E}f^-\dd{\mu}\]
provided that at least one of the integrals on the RHS is finite. The LHS is then a number in $[-\infty,\infty]$.

\begin{lemma}[Linearity]
Suppose $f,g\in L^1(\mu)$, and $\alpha,\beta\in\CC$. Then $\alpha f+\beta g\in L^1(\mu)$, and
\[\int_{X}(\alpha f+\beta g)\dd{\mu}=\alpha\int_{X}f\dd{\mu}+\beta\int_{X}g\dd{\mu}.\]
\end{lemma}

\begin{lemma}[Triangle inequality]
If $f\in L^1(\mu)$, then
\[\absolute{\int_{X}f\dd{\mu}}\le\int_{X}|f|\dd{\mu}.\]
\end{lemma}

We conclude this section with another important convergence theorem. 
This is like the monotone convergence theorem, but we are going to remove the increasing and non-negative measurable condition, and add in something else.

\begin{theorem}[Lebesgue's dominated convergence theorem]
Suppose $(f_n)$ is a sequence of complex measurable functions on $X$ such that
\[f(x)=\lim_{n\to\infty}f_n(x)\quad(x\in X).\]
If there exists $g\in L^1(\mu)$ such that
\[|f_n(x)|\le g(x)\quad(n=1,2,\dots,\:x\in X),\]
then $f\in L^1(\mu)$, and
\begin{equation}
\lim_{n\to\infty}\int_{X}f_n\dd{\mu}=\int_{X}f\dd{\mu}.
\end{equation}
\end{theorem}
\pagebreak

\section{Sets of Measure Zero}

\pagebreak

\section*{Exercises}
