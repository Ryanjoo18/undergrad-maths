\chapter{Mathematical Reasoning and Logic}\label{chap:logic-proofs}

\begin{summary}
\item Basic logic.
\item Common methods of proof.
\end{summary}

\section{Zeroth-order Logic}
A \vocab{proposition} is a sentence which has exactly one truth value, i.e. it is either true or false, but not both and not neither. A proposition is denoted by uppercase letters such as $P$ and $Q$. If the proposition $P$ depends on a variable $x$, it is sometimes helpful to denote it by $P(x)$. 

We can do some algebra on propositions, which include
\begin{enumerate}[label=(\roman*)]
\item \vocab{equivalence}, denoted by $P\iff Q$, which means $P$ and $Q$ are logically equivalent statements;

\item \vocab{conjunction}, denoted by $P\land Q$, which means ``$P$ and $Q$'';

\item \vocab{disjunction}, denoted by $P\lor Q$, which means ``$P$ or $Q$'';

\item \vocab{negation}, denoted by $\lnot P$, which means ``not $P$''.
\end{enumerate}

Here are some useful properties when handling logical statements. You can easily prove all of them using truth tables.
\begin{proposition} \
\begin{enumerate}[label=(\roman*)]
\item Double negation law: $P\iff\lnot(\lnot P)$.
\item Commutative: $P \land Q \iff Q \land P$, $P \lor Q \iff Q \lor P$.
\item Conjunction is associative: $(P\land Q)\land R \iff P\land (Q\land R)$.
\item Disjunction is associative: $(P\lor Q)\lor R \iff P\lor (Q\lor R)$.
\item Conjunction distributes over disjunction: $P\land(Q\lor R) \iff (P\land Q)\lor(P\land Q)$.
\item Disjunction distributes over conjunction: $P\lor(Q\land R) \iff (P\lor Q)\land(P\lor R)$.
\end{enumerate}
\end{proposition}

\begin{proposition}[de Morgan's laws]
\[ \lnot(P \lor Q) \iff (\lnot P \land \lnot Q) \]
\[ \lnot (P\land Q) \iff (\lnot P\lor \lnot Q) \]
\end{proposition}

\subsection{If, only if}
\vocab{Implication} is denoted by $P \implies Q$, which means ``$P$ implies $Q$'', i.e. if $P$ holds then $Q$ also holds. It is equivalent to saying ``If $P$ then $Q$''. $P \implies Q$ is known as a \emph{conditional statement}, where $P$ is known as the \emph{hypothesis} and $Q$ is known as the \emph{conclusion}. The only case when $P \implies Q$ is false is when the hypothesis $P$ is true and the conclusion $Q$ is false.

Statements of this form are probably the most common, although they may sometimes appear quite differently. The following all mean the same thing:
\begin{enumerate}[label=(\roman*)]
\item if $P$ then $Q$;
\item $P$ implies $Q$;
\item $P$ only if $Q$;
\item $P$ is a sufficient condition for $Q$;
\item $Q$ is a necessary condition for $P$.
\end{enumerate}

Given $P\implies Q$,
\begin{itemize}
\item its \vocab{converse} is $Q \implies P$; both are not logically equivalent;
\item its \vocab{inverse} is $\lnot P \implies \lnot Q$, i.e. the hypothesis and conclusion of the statement are both negated; both are not logically equivalent;
\item the \vocab{contrapositive} is $\lnot Q\implies\lnot P$; both are logically equivalent.
\end{itemize}

To prove $P \implies Q$, start by assuming that $P$ holds and try to deduce through some logical steps that $Q$ holds too. Alternatively, start by assuming that $Q$ does not hold and show that $P$ does not hold (that is, we prove the contrapositive).

\subsection{If and only if, iff}
\vocab{Bidirectional implication} is denoted by $P \iff Q$, which means both $P \implies Q$ and $Q \implies P$; $P \iff Q$ is known as a \emph{biconditional statement}. We can read this as ``$P$ if and only if $Q$''. The letters ``iff'' are also commonly used to stand for ``if and only if''.

$P \iff Q$ is true exactly when $P$ and $Q$ have the same truth value.

These statements are usually best thought of separately as ``if'' and ``only if'' statements. To prove $P \iff Q$, prove the statement in both directions, i.e. prove both $P \implies Q$ and $Q \implies P$. Remember to make very clear, both to yourself and in your written proof, which direction you are doing.
\pagebreak

\section{First-order Logic}
The \vocab{universal quantifier} is denoted by $\forall$, which means ``for all'' or ``for every''. A \emph{universal statement} takes the form $\forall x\in X, P(x)$.

The \vocab{existential quantifier} is denoted by $\exists$, which means ``there exists''. An \emph{existential statement} takes the form $\exists x\in X, P(x)$, where $X$ is known as the \emph{domain}.

\begin{proposition}[de Morgan's laws]
\[ \lnot \forall x\in X,P(x) \iff \exists x\in X,\lnot P(x) \]
\[ \lnot \exists x\in X,P(x) \iff \forall x\in X,\lnot P(x) \]
\end{proposition}

To prove a statement of the form $\forall x \in X \suchthat P(x)$, start the proof with ``Let $x \in X$.'' or ``Suppose $x \in X$ is given.'' to address the quantifier with an arbitrary $x$; provided no other assumptions about $x$ are made during the course of proving $P(x)$, this will prove the statement for all $x \in X$. 

To prove a statement of the form $\exists x \in X \suchthat P(x)$, there is not such a clear steer about how to continue: you may need to show the existence of an $x$ with the right properties; you may need to demonstrate logically that such an $x$ must exist because of some earlier assumption, or it may be that you can show constructively how to find one; or you may be able to prove by contradiction, supposing that there is no such $x$ and consequently arriving at some inconsistency.

\begin{remark}
Read from left to right, and as new elements or statements are introduced they are allowed to depend on previously introduced elements but cannot depend on things that are yet to be mentioned.
\end{remark}

\begin{remark}
To avoid confusion, it is a good idea to keep to the convention that the quantifiers come first, before any statement to which they relate.
\end{remark}
\pagebreak

\section{Methods of Proof}
A \vocab{direct proof} of $P \implies Q$ is a series of valid arguments that start with the hypothesis $P$ and end with the conclusion $Q$. It may be that we can start from $P$ and work directly to $Q$, or it may be that we make use of $P$ along the way.

A \vocab{proof by contrapositive} of $P \implies Q$ is to prove instead $\lnot Q \implies \lnot P$.

A \vocab{disproof by counterexample} is to providing a counterexample in order to refute or disprove a conjecture. The counterexample must make the hypothesis a true statement, and the conclusion a false statement. In seeking counterexamples, it is a good idea to keep the cases you consider simple, rather than searching randomly. It is often helpful to consider ``extreme'' cases; for example, something is zero, a set is empty, or a function is constant.

A \vocab{proof by cases} is to first dividing the situation into cases which exhaust all the possibilities, and then show that the statement follows in all cases.

\subsection{Proof by Contradiction}
A \vocab{proof by contradiction} of $P$ involves first supposing $P$ is false, i.e. $\lnot P$ (to prove $P \implies Q$ by contradiction, suppose $P\land\lnot Q$). Then show through some logical reasoning that this leads to a contradiction or inconsistency. We may arrive at something that contradicts the hypothesis $P$, or something that contradicts the initial supposition that $Q$ is not true, or we may arrive at something that we know to be universally false.

\begin{example}[Irrationality of $\sqrt{2}$]
Prove that $\sqrt{2}$ is irrational.
\begin{proof}
We prove by contradiction. Suppose otherwise, that $\sqrt{2}$ is rational. Then $\sqrt{2}=\dfrac{a}{b}$ for some $a,b\in\ZZ,b\neq 0$, $a,b$ coprime.

Squaring both sides gives
\[a^2=2b^2.\]
Since RHS is even, LHS must also be even. Hence it follows that $a$ is even. Let $a=2k$ where $k\in\ZZ$. Substituting $a = 2k$ into the above equation and simplifying it gives us
\[b^2=2k^2.\]
This means that $b^2$ is even, from which follows again that $b$ is even. This contradicts the assumption that $a$ and $b$ coprime, so we are done.
\end{proof}
\end{example}

\begin{example}[Euclid]
Prove that there are infinitely many prime numbers.

\begin{proof}
Suppose otherwise, that only finitely many prime numbers exist. List them as $p_1,\dots,p_n$. The number $N=p_1p_2\cdots p_n+1$ is divisible by a prime $p$, yet is coprime to $p_1,\dots,p_n$. Therefore, $p$ does not belong to our list of all prime numbers, a contradiction.
\end{proof}
\end{example}

\subsection{Proof of Existence}
To prove existential statements, we can adopt two approaches:
\begin{enumerate}
\item \vocab{Constructive proof} (direct proof)

To prove statements of the form $\exists x\in X \suchthat P(x)$, find or construct \emph{a specific example} for $x$. To prove statements of the form $\forall y\in Y,\:\exists x\in X\suchthat P(x,y)$, construct example for $x$ in terms of $y$ (since $x$ is dependent on $y$).

In both cases, you have to justify that your example $x$
\begin{enumerate}
\item belongs to the domain $X$, and
\item satisfies the condition $P$.
\end{enumerate}

\item \vocab{Non-constructive proof} (indirect proof)

Use when specific examples are not easy or not possible to find or construct.
Make arguments why such objects have to exist.
May need to use proof by contradiction.
Use definition, axioms or results that involve existential statements.
\end{enumerate}

To \vocab{prove uniqueness}, we can either assume $\exists x,y \in S$ such that $P(x) \land P(y)$ is true and show $x=y$, or argue by assuming that $\exists x,y \in S$ are distinct such that $P(x) \land P(y)$, then derive a contradiction. $\exists!$ denotes ``there exists a unique''. To prove uniqueness and existence, we also need to show that $\exists x \in S \suchthat P(x)$ is true.

\begin{example}
Prove that we can find $100$ consecutive positive integers which are all composite numbers.

\begin{proof}
We proceed by constructive proof; we will construct integers $n,n+1,n+2,\dots,n+99$, all of which are composite.
\begin{claim}
$n=101!+2$.
\end{claim}
Then $n$ has a factor of $2$ and hence is composite. Similarly, $n+k=101!+(k+2)$ has a factor $k+2$ and hence is composite for $k=1,2,\dots,99$.

Hence the existential statement is proven.
\end{proof}
\end{example}

\begin{example}
Prove that for all $p,q\in\QQ$ with $p<q$, there exists $x\in\QQ$ such that $p<x<q$.
\begin{proof}
We prove by construction; we want to construct $x$ in terms of $p$ and $q$, which fulfils the required condition.
\begin{claim}
$x=\dfrac{p+q}{2}$.
\end{claim}
Evidently $x\in\QQ$. Since $p<q$, 
\[x=\frac{p+q}{2}<\frac{q+q}{2}=q \implies x<q.\]
Similarly,
\[x=\frac{p+q}{2}>\frac{p+p}{2}=p \implies p<x.\]

\begin{remark}
There are two parts to prove: 1) $x$ satisfies the given statement 2) $x$ is within the domain (for this question we do not have to prove $x$ is rational since $\QQ$ is closed under addition).
\end{remark}
\end{proof}
\end{example}

\begin{example}
Prove that for all rational numbers $p$ and $q$ with $p<q$, there is an irrational number $r$ such that $p<r<q$.
\begin{proof}
We prove this by construction. Similarly, our goal is to find an irrational $r$ in terms of $p$ and $q$.

Note that we cannot simply take $r=\dfrac{p+q}{2}$; a simple counterexample is the case $p=-1,q=1$ where $r=0$ is clearly not irrational.

Since $p$ lies in between $p$ and $q$, let $r=p+c$ where $0<c<q-p$. Since $c<q-p$, we have $c=\dfrac{q-p}{k}$ for some $k>1$; to make $c$ irrational, we take $k$ to be irrational.

\begin{claim}
$r=p+\dfrac{q-p}{\sqrt{2}}$.
\end{claim}

We shall show that (i) $p<r<q$, and (ii) $r$ is irrational.
\begin{enumerate}[label=(\roman*)]
\item Since $q-p>0$, $\dfrac{q-p}{\sqrt{2}}>0$ so $r=p+\dfrac{q-p}{\sqrt{2}}>p+0=p$.

$\dfrac{q-p}{\sqrt{2}}<q-p$ so $r<p+(q-p)=q$.

\item We prove by contradiction. Suppose $r$ is rational. We have $\sqrt{2}=\dfrac{q-p}{r-p}$. Since $p,q,r$ are all rational (and $r-p\neq0$), RHS is rational. This implies that LHS is rational, i.e.\ $\sqrt{2}$ is rational, which is a contradiction.
\end{enumerate}
\end{proof}
\end{example}

\begin{example}
Prove that every integer greater than $1$ is divisible by a prime.

\begin{proof}
We proceed by a non-constructive proof.

If $n$ is prime, then we are done as $n\mid n$.

If $n$ is not prime, then $n$ is composite. So $n$ has a divisor $d_1$ such that $1<d_1<n$. If $d_1$ is prime then we are done as $d_1\mid n$. If $d_1$ is not prime then $d_1$ is composite, has divisor $d_2$ such that $1<d_2<n$.

If $d_2$ is prime, then we are done as $d_2\mid d_1$ and $d_1\mid n$ imply $d_2\mid n$. If $d_2$ is not prime then $d_2$ is composite, has divisor $d_3$ such that $1<d_3<d_2$.

Continuing in this manner after $k$ times, we will get
\[ 1<d_k<d_{k-1}<\cdots<d_2<d_1<n \]
where $d_i\mid n$ for all $i$.

Since there can only be a finite number of $d_i$'s between $1$ and $n$, this process must stop after finite steps. On the other hand, the process will stop only if there is a $d_i$ which is a prime. Hence we conclude that there must be a divisor $d_i$ of $n$ that is prime.
\end{proof}
\end{example}

\begin{remark}
This proof is also known as \emph{proof by infinite descent}, a method which relies on the well-ordering principle on $\NN$.
\end{remark}

\begin{example}
Prove that the equation $x^2+y^2=3z^2$ has no solutions $(x,y,z)$ in integers where $z\neq0$.

\begin{proof}
Suppose $(x,y,z)$ is a solution. WLOG assume $z>0$. By the least integer principle, we may also assume that our solution has $z$ minimal. Taking remainders modulo $3$, we see that
\[ x^2+y^2\equiv0\pmod3 \]
Since perfect squares can only be congruent to $0$ or $1$ modulo $3$, we must have $x\equiv y\equiv 0\pmod 3$. Writing $x=3a$ and $y=3b$ for $a,b\in\ZZ$ gives
\[ 9a^2+9b^2=3z^2 \implies 3(a^2+b^2)=z^2 \implies 3\mid z^2 \implies 3\mid z \]
Now let $z=3c$ and cancel $3$'s to obtain
\[ a^2+b^2=3c^2. \]
We have therefore constructed another solution $(a,b,c)=\brac{\frac{x}{3},\frac{y}{3},\frac{z}{3}}$, but $0<c<z$ contradicts the minimality of $z$.
\end{proof}
\end{example}

\subsection{Proof by Mathematical Induction}
Induction is an extremely powerful method of proof used throughout mathematics. It deals with infinite families of statements which come in the form of lists. The idea behind induction is in showing how each statement follows from the previous one on the list---all that remains is to kick off this logical chain reaction from some starting point.

The \emph{well-ordering principle} on $\NN$ states the following: every non-empty subset $S\subset\NN$ has a smallest element; that is, there exists $m\in S$ such that $m\le k$ for all $k\in S$.

The \emph{principle of induction} states the following: Let $S\subset\NN$. If (i) $1\in S$, and (ii) $k\in S\implies k+1\in S$, then $S=\NN$.

\begin{lemma}\label{lemma:wop-poi}
The well-ordering principle is equivalent to the principle of induction.
\end{lemma}

\begin{proof} \

\fbox{$\implies$} Suppose otherwise, for a contradiction, that $S$ exists with the given properties in the principle of induction, but $S\neq\NN$. 

Consider the set $\NN\setminus S$. Then $\NN\setminus S$ is not empty. By the well-ordering principle, $\NN\setminus S$ has a least element $p$. Since $1\in S$, $1\notin \NN\setminus S$ so $p\neq 1$, thus we must have $p>1$. 

Now consider $p-1$. Since $p$ is the least element of $\NN\setminus S$, $p-1\notin \NN\setminus S$ so $p-1\in S$. But by (ii) of the principle of induction, $p-1\in S$ implies $p\in S$, which contradicts the fact that $p\in\NN\setminus S$.

\fbox{$\impliedby$} Suppose the principle of induction is true. Then this implies that \cref{thrm:pmi} is true, which in turn implies that \cref{thrm:strong-induction} is true. In order to prove the well-ordering of $\NN$, we prove the following statement $P(n)$ by strong induction on $n$: If $S\subset\NN$ and $n\in S$, then $S$ has a least element.

The basis step is true, because if $1\in S$ then $1$ is the smallest element of $S$, since there are no smaller elements of $\NN$.

Now suppose that $P(k)$ is true for $k=1,\dots,n$. To show that $P(n+1)$ is true, let $S\subset\NN$ contain $n+1$. If $n+1$ is the smallest element of $S$, then we are done. Otherwise, $S$ has a smaller element $k$, and $P(k)$ is true by the inductive hypothesis, so again $S$ has a smallest element.

Hence by strong induction, $P(n)$ is true for all $n\in\NN$. This implies the well-ordering of $\NN$, because if $S$ is a non-empty subset of $\NN$, then pick $n\in S$. Since $n\in\NN$, $P(n)$ is true, and therefore $S$ has a smallest element.
\end{proof}

\begin{theorem}[Principle of mathematical induction]\label{thrm:pmi}
Let $P(n)$ be a family of statements indexed by $\NN$. Suppose that 
\begin{enumerate}[label=(\roman*)]
\item $P(1)$ is true;
\item for all $k\in\NN$, $P(k)\implies P(k+1)$.
\end{enumerate}
Then $P(n)$ is true for all $n\in\NN$.
\end{theorem}

(i) is known as the \emph{base case}; (ii) is known as the \emph{inductive step}, where we assume $P(k)$ to be true---this is called the \emph{inductive hypothesis}---and show that $P(k+1)$ is true.

\begin{proof}
Apply the principle of induction to the set $S=\{n\in\NN\mid P(n)\text{ is true}\}$.
\end{proof}

We illustrate the application of this proving technique using a classical example.

\begin{example}
Prove that for any $n\in\NN$,
\[\sum_{i=1}^n i=\frac{n(n+1)}{2}.\]

\begin{proof}
Induct on $n$. Let $\displaystyle P(n):\sum_{i=1}^n i=\frac{n(n+1)}{2}$.

Clearly $P(1)$ holds. Now suppose $P(k)$ holds for some $k\in\NN$, $k\ge1$; that is,
\[\sum_{i=1}^k i=\frac{k(k+1)}{2}.\]
Adding $k+1$ to both sides,
\begin{align*}
\sum_{i=1}^{k+1} i&=\frac{k(k+1)}{2}+(k+1)\\
&=\frac{(k+1)(k+2)}{2}\\
&=\frac{(k+1)[(k+1)+1]}{2}
\end{align*}
thus $P(k+1)$ is true. Hence by induction, the result holds.
\end{proof}
\end{example}

\begin{example}[Bernoulli's inequality]
Let $x\in\RR$, $x>-1$. Then for all $n\in\NN$,
\[(1+x)^n\ge1+nx.\]

\begin{proof}
Induct on $n$. Fix $x>-1$. Let $P(n):(1+x)^n\ge1+nx$.

The base case $P(1)$ is clear. Suppose that $P(k)$ is true for some $k\in\ZZ^+$, $k\ge1$. That is, $(1+x)^k\ge1+kx$. Note that $1+x>0$, and $kx^2\ge0$ (since $k>0$ and $x^2\ge0$). Then
\begin{align*}
(1+x)^{k+1}&=(1+x)(1+x)^k\\
&\ge(1+x)(1+kx)\quad\text{[induction hypothesis]}\\
&=1+(k+1)x+kx^2\\
&\ge1+(k+1)x\quad[\because kx^2\ge0]
\end{align*}
so $P(k+1)$ is true. Hence by induction, the result holds.
\end{proof}
\end{example}

A corollary of induction is if the family of statements holds for $n\ge N$, rather than necessarily $n\ge0$:

\begin{corollary}
Let $P(n)$ be a family of statements indexed by integers $n \ge N$ for $N\in\ZZ$. Suppose that 
\begin{enumerate}[label=(\roman*)]
\item $P(N)$ is true;
\item for all $k \ge N$, $P(k) \implies P(k+1)$. 
\end{enumerate}
Then $P(n)$ is true for all $n \ge N$.
\end{corollary}

\begin{proof}
Apply \cref{thrm:pmi} to the statement $Q(n)=P(n+N)$ for $n\in\NN$.
\end{proof}

Another variant on induction is when the inductive step relies on some earlier case(s) but not necessarily the immediately previous case.

\begin{theorem}[Strong induction]\label{thrm:strong-induction}
Let $P(n)$ be a family of statements indexed by $\NN$. Suppose that
\begin{enumerate}[label=(\roman*)]
\item $P(1)$ is true;
\item for all $k\in\NN$, $P(1)\land\cdots\land P(k)\implies P(k+1)$.
\end{enumerate}
Then $P(n)$ is true for all $n\in\NN$.
\end{theorem}

\begin{proof}
Let $Q(n)$ be the statement ``$P(k)$ holds for $k=1,\dots,n$''. Then the conditions for the strong form are equivalent to (i) $Q(1)$ holds and (ii) for $n\in\NN$, $Q(n)\implies Q(n+1)$. By \cref{thrm:pmi}, $Q(n)$ holds for all $n\in\NN$, and hence $P(n)$ holds for all $n$.
\end{proof}

\begin{example}[Fundamental theorem of arithmetic]
Prove that every natural number greater than $1$ may be expressed as a product of one or more prime numbers.

\begin{proof}
Let $P(n)$ be the statement that $n$ may be expressed as a product of prime numbers. 

Clearly $P(2)$ holds, since $2$ is itself prime. Let $n\ge 2$ be a natural number and suppose that $P(k)$ holds for all $k<n$.

\begin{itemize}
\item If $n$ is prime then it is trivially the product of the single prime number $n$. 

\item If $n$ is not prime, then there must exist some $r, s > 1$ such that $n = rs$. By the inductive hypothesis, each of $r$ and $s$ can be written as a product of primes, and therefore $n = rs$ is also a product of primes.
\end{itemize}

In both cases, $P(n)$ holds. Hence by strong induction, $P(n)$ is true for all $n\in\NN$.
\end{proof}
\end{example}

The following is also another variant on induction.

\begin{theorem}[Cauchy induction]
Let $P(n)$ be a family of statements indexed by $\NN_{\ge2}$. Suppose that
\begin{enumerate}[label=(\roman*)]
\item $P(2)$ is true;
\item for all $k\in\NN$, $P(k)\implies P(2k)$ and $P(k)\implies (k-1)$.
\end{enumerate}
Then $P(n)$ is true for all $n\in\NN_{\ge2}$.
\end{theorem}

\begin{example}[AM--GM inequality]
Given $n\in\NN$, prove that for positive reals $a_1,a_2,\dots,a_n$,
\[\frac{a_1+a_2+\cdots+a_n}{n}\ge\sqrt[n]{a_1a_2\cdots a_n}.\]

\begin{proof}
Let $\displaystyle P(n):\frac{a_1+a_2+\cdots+a_n}{n}\ge\sqrt[n]{a_1a_2\cdots a_n}$.

Base case $P(2)$ is true because\[\frac{a_1+a_2}{2}\ge\sqrt{a_1a_2} \iff (a_1+a_2)^2\ge 4a_1a_2 \iff (a_1-a_2)^2\ge0\]

Next we show that $P(n)\implies P(2n)$
\[\frac{a_1+a_2+\cdots+a_{2n}}{2n}=\frac{\frac{a_1+a_2+\cdots+a_n}{n}+\frac{a_{n+1}+a_{n+2}+\cdots+a_{2n}}{n}}{2}\]\[\frac{\frac{a_1+a_2+\cdots+a_n}{n}+\frac{a_{n+1}+a_{n+2}+\cdots+a_{2n}}{n}}{2}\ge\frac{\sqrt[n]{a_1a_2\cdots a_n}+\sqrt[n]{a_{n+1}a_{n+2}\cdots a_{2n}}}{2}\]\[\frac{\sqrt[n]{a_1a_2\cdots a_n}+\sqrt[n]{a_{n+1}a_{n+2}\cdots a_{2n}}}{2}\ge\sqrt{\sqrt[n]{a_1a_2\cdots a_n}\sqrt[n]{a_{n+1}a_{n+2}\cdots a_{2n}}}\]\[\sqrt{\sqrt[n]{a_1a_2\cdots a_n}\sqrt[n]{a_{n+1}a_{n+2}\cdots a_{2n}}}=\sqrt[2n]{a_1a_2\cdots a_{2n}}\]
The first inequality follows from $n$-variable AM--GM, which is true by assumption, and the second inequality follows from 2-variable AM--GM, which is proven above.

Finally we show that $P(n)\implies P(n-1)$. By $n$-variable AM--GM, $\frac{a_1+a_2+\cdots+a_n}{n}\ge\sqrt[n]{a_1a_2\cdots a_n}$ Let $a_n=\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}$ Then we have\[\frac{a_1+a_2+\cdots+a_{n-1}+\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}}{n}=\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\]So,\[\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\ge\sqrt[n]{a_1a_2\cdots a_{n-1}\cdot \frac{a_1+a_2+\cdots+a_{n-1}}{n-1}}\]\[\Rightarrow\left(\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\right)^n\ge a_1a_2\cdots a_{n-1}\cdot \frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\]\[\Rightarrow\left(\frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\right)^{n-1}\ge a_1a_2\cdots a_{n-1}\]\[\Rightarrow \frac{a_1+a_2+\cdots+a_{n-1}}{n-1}\ge\sqrt[n-1]{a_1a_2\cdots a_{n-1}}\]
By Cauchy induction, this proves the AM--GM inequality for $n$ variables.
\end{proof}
\end{example}

\subsection{Pigeonhole Principle}
\begin{theorem}[Pigeonhole principle]
If $kn+1$ objects are distributed among $n$ boxes, one of the boxes will contain at least $k+1$ objects.
\end{theorem}

\begin{example}[IMO 1972]
Prove that every set of $10$ two-digit integer numbers has two disjoint subsets with the same sum of elements.

\begin{proof}
Let $S$ be the set of $10$ numbers. It has $2^{10}-2=1022$ subsets that differ from both $S$ and the empty set. They are the ``pigeons''.

If $A\subset S$, the sum of elements of $A$ cannot exceed $91+92+\cdots+99=855$. The numbers between 1 and 855, which are all possible sums, are the ``holes''.

Because the number of ``pigeons'' exceeds the number of ``holes'', there will be two ``pigeons'' in the same ``hole''. Specifically, there will be two subsets with the same sum of elements. Deleting the common elements, we obtain two disjoint sets with the same sum of elements.
\end{proof}
\end{example}

\begin{example}[Putnam 2006]
Prove that for every set $X=\{x_1,x_2,\dots,x_n\}$ of $n$ real numbers, there exists a nonempty subset $S$ of $X$ and an integer $m$ such that
\[\absolute{m+\sum_{x\in S}s}\le\frac{1}{n+1}.\]

\begin{proof}
Recall that the fractional part of a real number $x$ is $x-\floor{x}$. Consider the fractional parts of the numbers $x_1,x_1+x_2,\dots,x_1+x_2+\cdots+x_n$.
\begin{itemize}
\item If any of them is either in the interval $\sqbrac{0,\frac{1}{n+1}}$ or $\sqbrac{\frac{n}{n+1},1}$, then we are done.
\item If not, consider these $n$ numbers as the ``pigeons'' and the $n-1$ intervals $\sqbrac{\frac{1}{n+1},\frac{2}{n+1}},\sqbrac{\frac{2}{n+1},\frac{3}{n+1}},\dots,\sqbrac{\frac{n-1}{n+1},\frac{n}{n+1}}$ as the ``holes''. By the pigeonhole principle, two of these sums, say $x_1+x_2+\cdots+x_k$ and $x_1+x_2+\cdots+x_{k+m}$, belong to the same interval. But then their difference $x_{k+1}+\cdots+x_{k+m}$ lies within a distance of $\frac{1}{n+1}$ of an integer, and we are done.

\end{itemize}
\end{proof}
\end{example}


\pagebreak

\section*{Exercises}
\addcontentsline{toc}{section}{Exercises}

\begin{exercise}
Negate the statement
\[ \text{for all real numbers } x, \text{ if } x>2, \text{ then } x^2>4 \]
\end{exercise}

\begin{solution}
In logical notation, this statement is $(\forall x \in \RR)[x>2 \implies x^2>4]$.
\begin{align*}
\lnot\{(\forall x \in \RR)[x>2 \implies x^2>4]\} 
&\iff (\exists x \in \RR) \lnot[x>2 \implies x^2>4] \\
&\iff (\exists x \in \RR) \lnot [(x\le2) \lor (x^2>4)] \\
&\iff (\exists x \in \RR) [(x>2) \land (x^2\le4)]
\end{align*}
\end{solution}

\begin{exercise}
Negate surjectivity.
\end{exercise}

\begin{solution}
If $f:X\to Y$ is not surjective, then it means that there exists $y \in Y$ not in the image of $X$, i.e. for all $x$ in $X$ we have $f(x)\neq y$.
\begin{align*}
\lnot \forall y \in Y, \exists x \in X, f(x)=y 
&\iff \exists y \in Y, \lnot (\exists x \in X, f(x)=y) \\
&\iff \exists y \in Y, \forall x \in X, \lnot (f(x)=y) \\
&\iff \exists y \in Y, \forall x \in X, f(x) \neq y
\end{align*}
\end{solution}

\begin{exercise}
Use the Unique Factorisation Theorem to prove that, if a positive integer $n$ is not a perfect square, then $\sqrt{n}$ is irrational.

[The Unique Factorisation Theorem states that every integer $n>1$ has a unique standard factored form, i.e. there is exactly one way to express $n=p_1^{k_1}p_2^{k_2}\cdots p_t^{k_t}$ where $p_1<p_2<\cdots<p_t$ are distinct primes and $k_1,k_2,\dots,k_t$ are some positive integers.]
\end{exercise}

\begin{solution}
Prove by contradiction. Suppose $n$ is not a perfect square and $\sqrt{n}$ is rational. Then $\sqrt{n}=\frac{a}{b}$ for some $a,b\in\ZZ$. Squaring both sides and clearing denominator gives 
\begin{equation*}\tag{$\ast$}
nb^2=a^2.
\end{equation*}

Consider the standard factored forms of $n$, $a$ and $b$:
\[ n=p_1^{k_1}p_2^{k_2}\cdots p_t^{k_t} \]
\[ a=q_1^{e_1}q_2^{e_2}\cdots q_u^{e_u} \implies a^2=q_1^{2e_1}q_2^{2e_2}\cdots q_u^{2e_u} \]
\[ b=r_1^{f_1}r_2^{f_2}\cdots r_v^{f_v} \implies b^2=r_1^{2f_1}r_2^{2f_2}\cdots r_v^{2f_v} \]
i.e. the powers of primes in the standard factored form of $a^2$ and $b^2$ are all even integers. 

This means the powers $k_i$ of primes $p_i$ in the standard factored form of $n$ are also even by Unique Factorisation Theorem. Note that all $p_i$ appear in the standard factored form of $a^2$ with even power $2c_i$, because of $(\ast)$. By UFT, $p_i$ must also appear in the standard factored form of $nb^2$ with the same even power $2c_i$.

If $p_i\nmid b$, then $k_i=2c_i$ which is even. If $p_i\mid b$, then $p_i$ will appear in $b^2$ with even power $2d_i$. So $k_i+2d_i=2c_i$, and hence $k_i=2(c_i-d_i)$, which is again even.

Hence $n=p_1^{k_1}p_2^{k_2}\cdots p_t^{k_t}=\brac{p_1^{\frac{k_1}{2}}p_2^{\frac{k_2}{2}}\cdots p_t^{\frac{k_t}{2}}}^2$.

Since $\frac{k_i}{2}$ are all integers, $p_1^{\frac{k_1}{2}}p_2^{\frac{k_2}{2}}\cdots p_t^{\frac{k_t}{2}}$ is an integer and $n$ is a perfect square. This contradicts the given hypothesis that $n$ is not a perfect square.
\end{solution}

\begin{exercise}
Prove that for every pair of irrational numbers $p$ and $q$ such that $p<q$, there is an irrational $x$ such that $p<x<q$.
\end{exercise}

\begin{solution}
Consider the average of $p$ and $q$. Evidently $p<\dfrac{p+q}{2}<q$.
\begin{itemize}
\item If $\dfrac{p+q}{2}$ is irrational, take $x=\dfrac{p+q}{2}$ and we are done.
\item If $\dfrac{p+q}{2}$ is rational, call it $r$, take the average of $p$ and $r$: $p<\dfrac{p+r}{2}<r<q$. Since $p$ is irrational and $r$ is rational, $\dfrac{p+r}{2}$ is irrational. In this case, we take $x=\dfrac{3p+q}{4}$.
\end{itemize}
\end{solution}

\begin{exercise}
Given $n$ real numbers $a_1,a_2,\dots,a_n$. Show that there exists an $a_i$ ($1\le i\le n$) such that $a_i$ is greater than or equal to the mean of the $n$ numbers.
\end{exercise}

\begin{solution}
Prove by contradiction.

Let $\bar{a}$ denote the mean value of the $n$ given numbers. Suppose $a_i<\bar{a}$ for all $a_i$. Then
\[ \bar{a}=\frac{a_1+a_2+\cdots+a_n}{n}<\frac{\bar{a}+\bar{a}+\cdots+\bar{a}}{n}=\frac{n\bar{a}}{n}=\bar{a}. \]
We derive $\bar{a}<\bar{a}$, which is a contradiction.

Hence there must be some $a_i$ such that $a_i>\bar{a}$.
\end{solution}

\begin{exercise}
Prove that the following statement is false: there is an irrational number $a$ such that for all irrational number $b$, $ab$ is rational.
\end{exercise}

\begin{idea}
Prove the negation of the statement: for every irrational number $a$, there is an irrational number $b$ such that $ab$ is irrational. We shall adopt a constructive proof (note that we can consider multiple cases and construct more than one $b$).
\end{idea}

\begin{solution}
Given an irrational number $a$, let us consider $\dfrac{\sqrt{2}}{a}$.

\textbf{Case 1:} $\dfrac{\sqrt{2}}{a}$ is irrational.

Take $b=\dfrac{\sqrt{2}}{a}$. Then $ab=\sqrt{2}$ which is irrational.

\textbf{Case 2:} $\dfrac{\sqrt{2}}{a}$ is rational.

Then the reciprocal $\dfrac{a}{\sqrt{2}}$. Since $\sqrt{6}$ is irrational, the product $\brac{\dfrac{a}{\sqrt{2}}}\sqrt{6}=a\sqrt{3}$ is irrational. Take $b=\sqrt{3}$, which is irrational. Then $ab=a\sqrt{3}$ which is irrational.
\end{solution}

\begin{exercise}
Prove that there are infinitely many prime numbers that are congruent to $3$ modulo $4$.
\end{exercise}

\begin{solution}
Prove by contradiction.

Suppose there are only finitely many primes that are congruent to $3$ modulo $4$. Let $p_1,p_2,\dots,p_m$ be the list of all the primes that are congruent to $3$ modulo $4$.

We construct an integer $M$ by $M=(p_1p_2\cdots p_m)^2+2$.

We have the following observation:
\begin{enumerate}[label=(\roman*)]
\item  $M\equiv 3 \mod 4$.
\item Every $p_i$ divides $M-2$.
\item None of the $p_i$ divides $M$. [Otherwise, together with (ii), this will imply $p_i$ divides $2$, which is impossible.]
\item $M$ is not a prime number. [Otherwise, by (i), $M$ is a prime number congruent to $3$ modulo $4$. But $M\neq p_i$ for all $1\le i\le m$. This contradicts the assumption that $p_1,p_2,\dots,p_m$ are all the prime numbers congruent to $3$ modulo $4$.]
\end{enumerate}

From the above discussion, we know that $M$ is a composite number by (iv). So it has a prime factorization $M=q_1q_2\cdots q_k$.

Since $M$ is odd, all these prime factors $q_j$ must be odd, and hence $q_j$ must be congruent to either $1$ or $3$ modulo $4$.

By (iii), $q_j$ cannot be any of the $p_i$. So all $q_j$ must be congruent to $1$ modulo $4$. Then $M$, which is the product of $q_j$, must also be congruent to $1$ modulo $4$.

This contradicts (i) that $M$ is congruent to $3$ modulo $4$.

Hence we conclude that there must be infinitely many primes that are congruent to $3$ modulo $4$.
\end{solution}

\begin{exercise}
Prove that, for any positive integer $n$, there is a perfect square $m^2$ ($m$ is an integer) such that $n\le m^2\le 2n$.
\end{exercise}

\begin{solution}
Prove by contradiction.

Suppose otherwise, that $n>m^2$ and $(m+1)^2>2n$ so that there is no square between $n$ and $2n$, then
\[ (m+1)^2>2n>2m^2. \]
Since we are dealing with integers and the inequalities are strict, we get
\[ (m+1)^2\ge2m^2+2 \]
which simplifies to
\[ 0\ge m^2-2m+1=(m-1)^2 \]
The only value for which this is possible is $m=1$, but you can eliminate that easily enough.
\end{solution}

\begin{exercise}
Prove that for every positive integer $n\ge4$,
\[ n!>2^n. \]
\end{exercise}

\begin{solution}
Let $P(n):n!>2^n$

For the base case $P(4)$, the LHS equals to $4!=4\times3\times2\times1=24$, and the RHS equals $2^4=16<24$. Since LHS equals RHS, $P(4)$ is true.

Now suppose that $P(k)$ is true for some $k\in\NN_{\ge4}$. Then
\begin{align*}
k!&>2^k \\
(k+1)k!&>2^k(k+1)\\
&>2^k2\quad\text{since from $k\ge4$, $k+1\ge5>2$} \\
&=2^{k+1}
\end{align*}
thus $P(k+1)$ is true, so we have shown $P(k)\implies P(k+1)$ for all $k\in\NN_{\ge4}$.

By PMI, we have proven $P(n)$ for all integers $n\ge4$.
\end{solution}

\begin{exercise}
Prove by mathematical induction, for $n\ge2$,
\[ \sqrt[n]{n}<2-\frac{1}{n}. \]
\end{exercise}

\begin{solution}
Let $P(n):\sqrt[n]{n}<2 - \dfrac{1}{n}$ for $n \ge 2$.

For the base case, when $n=2$, $\sqrt{2}=1.41\dots<2-\dfrac{1}{2}=1.5$ which is true. Hence $P(2)$ is true.

Now assume $P(k)$ is true for $k \ge 2, k \in \NN$; that is,
\[ \sqrt[k]{k}<2 - \dfrac{1}{k} \implies k<\brac{2-\frac{1}{k}}^k \]

We want to prove that $P(k+1)$ is true; that is,
\[ k+1<\brac{2-\frac{1}{k+1}}^{k+1} \]

Since $k>2$, we have 
\begin{align*}
\brac{2-\frac{1}{k+1}}^{k+1}
&> \brac{2-\frac{1}{k}}^{k+1} \quad \because k>2 \\
&= \brac{2-\frac{1}{k}}^k\brac{2-\frac{1}{k}} \\
&> k\brac{2-\frac{1}{k}} \quad \text{[by inductive hypothesis]} \\
&= 2k-1=k+k-1 > k-1 \because k>2
\end{align*}
Hence $P(k+1)$ is true.

Since $P(2)$ is true and $P(k)\implies P(k+1)$, by mathematical induction $P(n)$ is true.
\end{solution}

\begin{exercise}
Prove that for all integers $n \ge 3$, 
\[ \brac{1+\frac{1}{n}}^n<n \]
\end{exercise}

\begin{solution}
For the base case $P(3)$, $\brac{1+\dfrac{1}{3}}^3=\dfrac{64}{27}=2\dfrac{10}{27}<3$. Hence $P(3)$ is true.

Assume that $P(k)$ is true for some $k\in\NN_{\ge3}$; that is,
\[\brac{1+\frac{1}{k}}^k<k.\]
Multiplying both sides by $\brac{1+\dfrac{1}{k}}$ (to get a $k+1$ in the power),
\[ \brac{1+\frac{1}{k}}^k\brac{1+\frac{1}{k}}=\brac{1+\frac{1}{k}}^{k+1}<k\brac{1+\frac{1}{k}}=k+1  \]
Since $k<k+1 \iff \dfrac{1}{k}>\dfrac{1}{k+1}$, 
\[ \brac{1+\frac{1}{k}}^{k+1} > \brac{1+\frac{1}{k+1}}^{k+1} \]
The rest of the proof follows easily.
\end{solution}

A sequence of integers $F_i$, where integer $1\le i\le n$, is called the \emph{Fibonacci sequence} if and only if it is defined recursively by $F_1=1$, $F_2=1$, $F_n=F_{n-1}+F_{n-2}$ for $n>2$.

\begin{exercise}
Let $(a_n)$ be a sequence of integers defined recursively by the initial conditions $a_1=1$, $a_2=1$, $a_3=3$ and the recurrence relation $a_n=a_{n-1}+a_{n-2}+a_{n-3}$ for $n>3$.

For all $n\in\NN$, prove that
\[ a_n\le2^{n-1}. \]
\end{exercise}

\begin{solution}
Let $P(n):a_n\le2^{n-1}$.

Given the recurrence relation, it could be possible to use $P(k),P(k+1),P(k+2)$ to prove $P(k+3)$ for all $k\in\NN$.

\textbf{Base case:} $P(1),P(2),P(3)$

$P(1):a_1=1\le2^{1-1}=1$ is true.

$P(2):a_2=1\le2^{2-1}=2$ is true.

$P(3):a_3=3\le2^{3-1}=4$ is true.

\textbf{Inductive step:} $P(k)\land P(k+1)\land P(k+2)\implies P(k+3)$ for all $k\in\NN$

By inductive hypothesis, for $k\in\NN$ we have $a_k\le2^k, a_{k+1}\le2^{k+1}, a_{k+2}\le2^{k+2}$.
\begin{align*}
a_{k+3} &= a_k+a_{k+1}+a_{k+2} \quad \text{[start from recurrence relation]} \\
&\le 2^k+2^{k+1}+2^{k+2} \quad \text{[use inductive hypothesis]} \\
&= 2^k(1+2+2^2) \\
&< 2^k(2^3) \quad \text{[approximation, since $1+2+2^2<2^3$]} \\
&= 2^{k+3}
\end{align*}
which is precisely $P(k+3):a_{k+3}\le2^{k+3}$.
\end{solution}

\begin{exercise}
For $m,n\in\NN$, prove that
\[ F_{n+m+1}=F_nF_m+F_{n+1}F_{m+1}. \]
\end{exercise}

\begin{solution}
We induct on $n$. Let $P(n):F_{n+m+1}=F_nF_m+F_{n+1}F_{m+1}$ for all $m\in\NN$ in the cases $k=n$ and $k=n+1$.

To show that $P(0)$ is true, note that
\[ F_{m+1}=F_0F_m+F_1F_{m+1} \]
and
\[ F_{m+2}=F_1F_m+F_2F_{m+1} \]
for all $m$, as $F_0=0$ and $F_1=F_2=1$.

Now assume $P(n)$ is true; that is, for all $m\in\NN$,
\begin{align*}
F_{n+m+1}&=F_nF_m+F_{n+1}F_{m+1},\\
F_{n+m+2}&=F_{n+1}F_m+F_{n+2}F_{m+1}.
\end{align*}

Then
\begin{align*}
F_{n+m+3}
&=F_{n+m+2}+F_{n+m+1}\\
&=F_n F_m+F_{n+1}F_{m+1}+F_{n+1}F_m+F_{n+2}F_{m+1}\\
&=(F_n+F_{n+1})F_m+(F_{n+1}+F_{n+2})F_{m+1}\\
&=F_{n+2}F_m+F_{n+3}F_{m+1}
\end{align*}
thus $P(n+1)$ is true, for all $m\in\NN$.
\end{solution}